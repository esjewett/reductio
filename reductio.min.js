// https://github.com/esjewett/reductio v0.6.3 Copyright 2019 Ethan Jewett
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).reductio=n()}(this,(function(){"use strict";var e={add:function(e,n,r){return function(t,u,i){return e(u,i)?n&&n(t,u,i):r&&r(t,u,i),t}},remove:function(e,n,r){return function(t,u,i){return e(u,i)?n&&n(t,u,i):r&&r(t,u,i),t}}},n={add:function(e,n,r){return function(t,u,i){return e&&e(t,u,i),n(t)[r]++,t}},remove:function(e,n,r){return function(t,u,i){return e&&e(t,u,i),n(t)[r]--,t}},initial:function(e,n,r){return function(t){return e&&(t=e(t)),n(t)[r]=0,t}}},r={add:function(e,n,r){return function(t,u,i){return n&&n(t,u,i),r(t).sum=r(t).sum+e(u),t}},remove:function(e,n,r){return function(t,u,i){return n&&n(t,u,i),r(t).sum=r(t).sum-e(u),t}},initial:function(e,n){return function(r){return r=e(r),n(r).sum=0,r}}},t={add:function(e,n,r){return function(e,t,u){return n&&n(e,t,u),r(e).count>0?r(e).avg=r(e).sum/r(e).count:r(e).avg=0,e}},remove:function(e,n,r){return function(e,t,u){return n&&n(e,t,u),r(e).count>0?r(e).avg=r(e).sum/r(e).count:r(e).avg=0,e}},initial:function(e,n){return function(r){return r=e(r),n(r).avg=0,r}}},u={add:function(e,n){var r;return function(t,u,i){return e&&e(t,u,i),r=Math.floor(n(t).valueList.length/2),n(t).valueList.length%2?n(t).median=n(t).valueList[r]:n(t).median=(n(t).valueList[r-1]+n(t).valueList[r])/2,t}},remove:function(e,n){var r;return function(t,u,i){return e&&e(t,u,i),r=Math.floor(n(t).valueList.length/2),0===n(t).valueList.length?(n(t).median=void 0,t):(1===n(t).valueList.length||n(t).valueList.length%2?n(t).median=n(t).valueList[r]:n(t).median=(n(t).valueList[r-1]+n(t).valueList[r])/2,t)}},initial:function(e,n){return function(r){return r=e(r),n(r).median=void 0,r}}},i={add:function(e,n){return function(r,t,u){return e&&e(r,t,u),n(r).min=n(r).valueList[0],r}},remove:function(e,n){return function(r,t,u){return e&&e(r,t,u),0===n(r).valueList.length?(n(r).min=void 0,r):(n(r).min=n(r).valueList[0],r)}},initial:function(e,n){return function(r){return r=e(r),n(r).min=void 0,r}}},o={add:function(e,n){return function(r,t,u){return e&&e(r,t,u),n(r).max=n(r).valueList[n(r).valueList.length-1],r}},remove:function(e,n){return function(r,t,u){return e&&e(r,t,u),0===n(r).valueList.length?(n(r).max=void 0,r):(n(r).max=n(r).valueList[n(r).valueList.length-1],r)}},initial:function(e,n){return function(r){return r=e(r),n(r).max=void 0,r}}};if("undefined"!=typeof Uint8Array)var a=function(e){return new Uint8Array(e)},c=function(e,n){if(e.length>=n)return e;var r=new e.constructor(n);return r.set(e),r},f=function(e,n){var r,t;switch(n){case 16:t=e.length,r=new Uint16Array(t);break;case 32:r=function(e){return new Uint32Array(e)}(e.length);break;default:throw new Error("invalid array width!")}return r.set(e),r};function s(e){for(var n=new Array(e),r=-1;++r<e;)n[r]=0;return n}function l(e){this.length=e,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=a(e)}l.prototype.lengthen=function(e){var n,r;for(n=0,r=this.subarrays;n<r;++n)this[n]=c(this[n],e);this.length=e},l.prototype.add=function(){var e,n,r,t,u;for(t=0,u=this.subarrays;t<u;++t)if(r=(~(e=this.masks[t])&e+1)>>>0,!((n=this.width-32*t)>=32)||r)return n<32&&r&1<<n&&(this[t]=f(this[t],n<<=1),this.width=32*t+n),this.masks[t]|=r,{offset:t,one:r};return this[this.subarrays]=a(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},l.prototype.copy=function(e,n){var r,t;for(r=0,t=this.subarrays;r<t;++r)this[r][e]=this[r][n]},l.prototype.truncate=function(e){var n,r;for(n=0,r=this.subarrays;n<r;++n)for(var t=this.length-1;t>=e;t--)this[n][t]=0;this.length=e},l.prototype.zero=function(e){var n,r;for(n=0,r=this.subarrays;n<r;++n)if(this[n][e])return!1;return!0},l.prototype.zeroExcept=function(e,n,r){var t,u;for(t=0,u=this.subarrays;t<u;++t)if(t===n?this[t][e]&r:this[t][e])return!1;return!0},l.prototype.zeroExceptMask=function(e,n){var r,t;for(r=0,t=this.subarrays;r<t;++r)if(this[r][e]&n[r])return!1;return!0},l.prototype.only=function(e,n,r){var t,u;for(t=0,u=this.subarrays;t<u;++t)if(this[t][e]!=(t===n?r:0))return!1;return!0},l.prototype.onlyExcept=function(e,n,r,t,u){var i,o,a;for(o=0,a=this.subarrays;o<a;++o)if(i=this[o][e],o===n&&(i&=r),i!=(o===t?u:0))return!1;return!0};var d={array8:s,array16:s,array32:s,arrayLengthen:function(e,n){for(var r=e.length;r<n;)e[r++]=0;return e},arrayWiden:function(e,n){if(n>32)throw new Error("invalid array width!");return e},bitarray:l};var v={filterExact:(e,n)=>(function(r){var t=r.length;return[e.left(r,n,0,t),e.right(r,n,0,t)]}),filterRange:(e,n)=>{var r=n[0],t=n[1];return function(n){var u=n.length;return[e.left(n,r,0,u),e.left(n,t,0,u)]}},filterAll:e=>[0,e.length]},h=e=>e,p=()=>null,m=()=>0;function g(e){function n(e,n,t){for(var u=t-n,i=1+(u>>>1);--i>0;)r(e,i,u,n);return e}function r(n,r,t,u){for(var i,o=n[--u+r],a=e(o);(i=r<<1)<=t&&(i<t&&e(n[u+i])>e(n[u+i+1])&&i++,!(a<=e(n[u+i])));)n[u+r]=n[u+i],r=i;n[u+r]=o}return n.sort=function(e,n,t){for(var u,i=t-n;--i>0;)u=e[n],e[n]=e[n+i],e[n+i]=u,r(e,1,i,n);return e},n}const y=g(h);function b(e){var n=y.by(e);return function(r,t,u,i){var o,a,c,f=new Array(i=Math.min(u-t,i));for(a=0;a<i;++a)f[a]=r[t++];if(n(f,0,i),t<u){o=e(f[0]);do{e(c=r[t])>o&&(f[0]=c,o=e(n(f,0,i)[0]))}while(++t<u)}return f}}y.by=g;const x=b(h);function A(e){function n(n,r,t,u){for(;t<u;){var i=t+u>>>1;r<e(n[i])?u=i:t=i+1}return t}return n.right=n,n.left=function(n,r,t,u){for(;t<u;){var i=t+u>>>1;e(n[i])<r?t=i+1:u=i}return t},n}x.by=b;const _=A(h);function L(e){return function(n,r,t){for(var u=r+1;u<t;++u){for(var i=u,o=n[u],a=e(o);i>r&&e(n[i-1])>a;--i)n[i]=n[i-1];n[i]=o}return n}}_.by=A;const O=L(h);O.by=L;var w=(e,n,r)=>{for(var t=0,u=n.length,i=r?JSON.parse(JSON.stringify(e)):new Array(u);t<u;++t)i[t]=e[n[t]];return i};function I(e){var n=O.by(e);function r(e,r,u){return(u-r<R?n:t)(e,r,u)}function t(n,t,u){var i,o=(u-t)/6|0,a=t+o,c=u-1-o,f=t+u-1>>1,s=f-o,l=f+o,d=n[a],v=e(d),h=n[s],p=e(h),m=n[f],g=e(m),y=n[l],b=e(y),x=n[c],A=e(x);v>p&&(i=d,d=h,h=i,i=v,v=p,p=i),b>A&&(i=y,y=x,x=i,i=b,b=A,A=i),v>g&&(i=d,d=m,m=i,i=v,v=g,g=i),p>g&&(i=h,h=m,m=i,i=p,p=g,g=i),v>b&&(i=d,d=y,y=i,i=v,v=b,b=i),g>b&&(i=m,m=y,y=i,i=g,g=b,b=i),p>A&&(i=h,h=x,x=i,i=p,p=A,A=i),p>g&&(i=h,h=m,m=i,i=p,p=g,g=i),b>A&&(i=y,y=x,x=i,i=b,b=A,A=i);var _=h,L=p,O=y,w=b;n[a]=d,n[s]=n[t],n[f]=m,n[l]=n[u-1],n[c]=x;var I=t+1,R=u-2,S=L<=w&&L>=w;if(S)for(var E=I;E<=R;++E){var k=n[E],j=e(k);if(j<L)E!==I&&(n[E]=n[I],n[I]=k),++I;else if(j>L)for(;;){var z=e(n[R]);if(!(z>L)){if(z<L){n[E]=n[I],n[I++]=n[R],n[R--]=k;break}n[E]=n[R],n[R--]=k;break}R--}}else!function(){for(var r=I;r<=R;r++){var t=n[r],u=e(t);if(u<L)r!==I&&(n[r]=n[I],n[I]=t),++I;else if(u>w)for(;;){var i=e(n[R]);if(!(i>w)){i<L?(n[r]=n[I],n[I++]=n[R],n[R--]=t):(n[r]=n[R],n[R--]=t);break}if(--R<r)break}}}();return n[t]=n[I-1],n[I-1]=_,n[u-1]=n[R+1],n[R+1]=O,r(n,t,I-1),r(n,R+2,u),S?n:(I<a&&R>c&&function(){for(var r,t;(r=e(n[I]))<=L&&r>=L;)++I;for(;(t=e(n[R]))<=w&&t>=w;)--R;for(var u=I;u<=R;u++){var i=n[u],o=e(i);if(o<=L&&o>=L)u!==I&&(n[u]=n[I],n[I]=i),I++;else if(o<=w&&o>=w)for(;;){if(!((t=e(n[R]))<=w&&t>=w)){t<L?(n[u]=n[I],n[I++]=n[R],n[R--]=i):(n[u]=n[R],n[R--]=i);break}if(--R<u)break}}}(),r(n,I,R+1))}return r}var R=32;const S=I(h);S.by=I;var E={reduceIncrement:e=>e+1,reduceDecrement:e=>e-1,reduceAdd:e=>(function(n,r){return n+ +e(r)}),reduceSubtract:e=>(function(n,r){return n-e(r)})},k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},j="Expected a function",z="__lodash_hash_undefined__",q=1/0,C="[object Function]",P="[object GeneratorFunction]",K="[object Symbol]",M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/,V=/^\./,F=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g,$=/^\[object .+?Constructor\]$/,U="object"==typeof k&&k&&k.Object===Object&&k,Y="object"==typeof self&&self&&self.Object===Object&&self,D=U||Y||Function("return this")();var W,B=Array.prototype,G=Function.prototype,J=Object.prototype,X=D["__core-js_shared__"],H=(W=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Q=G.toString,Z=J.hasOwnProperty,ee=J.toString,ne=RegExp("^"+Q.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=D.Symbol,te=B.splice,ue=he(D,"Map"),ie=he(Object,"create"),oe=re?re.prototype:void 0,ae=oe?oe.toString:void 0;function ce(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var t=e[n];this.set(t[0],t[1])}}function fe(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var t=e[n];this.set(t[0],t[1])}}function se(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var t=e[n];this.set(t[0],t[1])}}function le(e,n){for(var r,t,u=e.length;u--;)if((r=e[u][0])===(t=n)||r!=r&&t!=t)return u;return-1}function de(e){return!(!xe(e)||(n=e,H&&H in n))&&(be(e)||function(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}(e)?ne:$).test(function(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var n}function ve(e,n){var r,t,u=e.__data__;return("string"==(t=typeof(r=n))||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==r:null===r)?u["string"==typeof n?"string":"hash"]:u.map}function he(e,n){var r=function(e,n){return null==e?void 0:e[n]}(e,n);return de(r)?r:void 0}ce.prototype.clear=function(){this.__data__=ie?ie(null):{}},ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ce.prototype.get=function(e){var n=this.__data__;if(ie){var r=n[e];return r===z?void 0:r}return Z.call(n,e)?n[e]:void 0},ce.prototype.has=function(e){var n=this.__data__;return ie?void 0!==n[e]:Z.call(n,e)},ce.prototype.set=function(e,n){return this.__data__[e]=ie&&void 0===n?z:n,this},fe.prototype.clear=function(){this.__data__=[]},fe.prototype.delete=function(e){var n=this.__data__,r=le(n,e);return!(r<0)&&(r==n.length-1?n.pop():te.call(n,r,1),!0)},fe.prototype.get=function(e){var n=this.__data__,r=le(n,e);return r<0?void 0:n[r][1]},fe.prototype.has=function(e){return le(this.__data__,e)>-1},fe.prototype.set=function(e,n){var r=this.__data__,t=le(r,e);return t<0?r.push([e,n]):r[t][1]=n,this},se.prototype.clear=function(){this.__data__={hash:new ce,map:new(ue||fe),string:new ce}},se.prototype.delete=function(e){return ve(this,e).delete(e)},se.prototype.get=function(e){return ve(this,e).get(e)},se.prototype.has=function(e){return ve(this,e).has(e)},se.prototype.set=function(e,n){return ve(this,e).set(e,n),this};var pe=ge((function(e){var n;e=null==(n=e)?"":function(e){if("string"==typeof e)return e;if(Ae(e))return ae?ae.call(e):"";var n=e+"";return"0"==n&&1/e==-q?"-0":n}(n);var r=[];return V.test(e)&&r.push(""),e.replace(F,(function(e,n,t,u){r.push(t?u.replace(N,"$1"):n||e)})),r}));function me(e){if("string"==typeof e||Ae(e))return e;var n=e+"";return"0"==n&&1/e==-q?"-0":n}function ge(e,n){if("function"!=typeof e||n&&"function"!=typeof n)throw new TypeError(j);var r=function(){var t=arguments,u=n?n.apply(this,t):t[0],i=r.cache;if(i.has(u))return i.get(u);var o=e.apply(this,t);return r.cache=i.set(u,o),o};return r.cache=new(ge.Cache||se),r}ge.Cache=se;var ye=Array.isArray;function be(e){var n=xe(e)?ee.call(e):"";return n==C||n==P}function xe(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function Ae(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&ee.call(e)==K}var _e=function(e,n,r){var t=-1,u=(n=function(e,n){if(ye(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ae(e))||(T.test(e)||!M.test(e)||null!=n&&e in Object(n))}(n,e)?[n]:function(e){return ye(e)?e:pe(e)}(n)).length;for(u||(e=void 0,u=1);++t<u;){var i=null==e?void 0:e[me(n[t])];void 0===i&&(t=u,i=r),e=be(i)?i.call(e):i}return e},Le=-1;function Oe(){var e,n={add:c,remove:function(n){for(var i=we(t,t),a=[],c="function"==typeof n,f=0,l=0;f<t;++f)d=f,(c?n(r[d],d):e.zero(d))?(a.push(f),i[f]=Le):i[f]=l++;var d;u.forEach((function(e){e(-1,-1,[],a,!0)})),o.forEach((function(e){e(i)}));for(var v=0,h=0;v<t;++v)i[v]!==Le&&(v!==h&&(e.copy(h,v),r[h]=r[v]),++h);r.length=t=h,e.truncate(h),s("dataRemoved")},dimension:function(n,a){if("string"==typeof n){var c=n;n=function(e){return _e(e,c)}}var f,l,g,b,A,L,O,I,R,k,j,z,q,C,P,K,M={filter:function(e){return null==e?Z():Array.isArray(e)?Q(e):"function"==typeof e?ee(e):H(e)},filterExact:H,filterRange:Q,filterFunction:ee,filterAll:Z,currentFilter:function(){return C},hasCurrentFilter:function(){return P},top:function(n,t){var u,i=[],o=Y,c=0;t&&t>0&&(c=t);for(;--o>=U&&n>0;)e.zero(u=L[o])&&(c>0?--c:(i.push(r[u]),--n));if(a)for(o=0;o<T.length&&n>0;o++)e.zero(u=T[o])&&(c>0?--c:(i.push(r[u]),--n));return i},bottom:function(n,t){var u,i,o=[],c=0;t&&t>0&&(c=t);if(a)for(u=0;u<T.length&&n>0;u++)e.zero(i=T[u])&&(c>0?--c:(o.push(r[i]),--n));u=U;for(;u<Y&&n>0;)e.zero(i=L[u])&&(c>0?--c:(o.push(r[i]),--n)),u++;return o},group:re,groupAll:function(){var e=re(p),n=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return n()[0].value},e},dispose:te,remove:te,accessor:n,id:function(){return b}},T=[],V=S.by((function(e){return O[e]})),F=v.filterAll,N=[],$=[],U=0,Y=0,D=0;i.unshift(B),i.push(G),o.push(J);var W=e.add();function B(r,u,i){if(a){D=0,N=0,K=[];for(var o=0;o<r.length;o++)for(N=0,K=n(r[o]);N<K.length;N++)D++;O=[],k=Ie(r.length),z=we(D,1);for(var c=Ie(D),s=0,l=0;l<r.length;l++)if((K=n(r[l])).length)for(k[l]=K.length,N=0;N<K.length;N++)O.push(K[N]),c[s]=l,s++;else k[l]=0,T.push(l+u);var v=V(Ie(D),0,D);O=w(O,v),I=w(c,v)}else O=r.map(n),I=V(Ie(i),0,i),O=w(O,I);a&&(i=D);var h=F(O),p=h[0],m=h[1];if(q)for(var y=0;y<i;++y)q(O[y],y)||(e[g][I[y]+u]|=f,a&&(z[y]=1));else{for(var b=0;b<p;++b)e[g][I[b]+u]|=f,a&&(z[b]=1);for(var x=m;x<i;++x)e[g][I[x]+u]|=f,a&&(z[x]=1)}if(!u)return A=O,L=I,R=k,j=z,U=p,void(Y=m);var _,S=A,E=L,C=j,P=0;if(o=0,a&&(_=u,u=S.length,i=D),A=a?new Array(u+i):new Array(t),L=a?new Array(u+i):we(t,t),a&&(j=we(u+i,1)),a){var M=R.length;R=d.arrayLengthen(R,t);for(var N=0;N+M<t;N++)R[N+M]=k[N]}for(var $=0;o<u&&P<i;++$)S[o]<O[P]?(A[$]=S[o],a&&(j[$]=C[o]),L[$]=E[o++]):(A[$]=O[P],a&&(j[$]=z[P]),L[$]=I[P++]+(a?_:u));for(;o<u;++o,++$)A[$]=S[o],a&&(j[$]=C[o]),L[$]=E[o];for(;P<i;++P,++$)A[$]=O[P],a&&(j[$]=z[P]),L[$]=I[P]+(a?_:u);h=F(A),U=h[0],Y=h[1]}function G(e,n,r){N.forEach((function(e){e(O,I,n,r)})),O=I=null}function J(e){if(a){for(var n=0,r=0;n<T.length;n++)e[T[n]]!==Le&&(T[r]=e[T[n]],r++);for(T.length=r,n=0,r=0;n<t;n++)e[n]!==Le&&(r!==n&&(R[r]=R[n]),r++);R.length=r}for(var u,i=A.length,o=0,c=0;o<i;++o)e[u=L[o]]!==Le&&(o!==c&&(A[c]=A[o]),L[c]=e[u],a&&(j[c]=j[o]),++c);for(A.length=c,a&&(j.length=c);c<i;)L[c++]=0;var f=F(A);U=f[0],Y=f[1]}function X(n){var r=n[0],t=n[1];if(q)return q=null,ne((function(e,n){return r<=n&&n<t}),0===n[0]&&n[1]===A.length),U=r,Y=t,M;var i,o,c,l=[],d=[],v=[],h=[];if(r<U)for(i=r,o=Math.min(U,t);i<o;++i)l.push(L[i]),v.push(i);else if(r>U)for(i=U,o=Math.min(r,Y);i<o;++i)d.push(L[i]),h.push(i);if(t>Y)for(i=Math.max(r,Y),o=t;i<o;++i)l.push(L[i]),v.push(i);else if(t<Y)for(i=Math.max(U,t),o=Y;i<o;++i)d.push(L[i]),h.push(i);if(a){var p=[],m=[];for(i=0;i<l.length;i++)R[l[i]]++,j[v[i]]=0,1===R[l[i]]&&(e[g][l[i]]^=f,p.push(l[i]));for(i=0;i<d.length;i++)R[d[i]]--,j[h[i]]=1,0===R[d[i]]&&(e[g][d[i]]^=f,m.push(d[i]));if(l=p,d=m,0===n[0]&&n[1]===A.length)for(i=0;i<T.length;i++)e[g][c=T[i]]&f&&(e[g][c]^=f,l.push(c));else for(i=0;i<T.length;i++)e[g][c=T[i]]&f||(e[g][c]^=f,d.push(c))}else{for(i=0;i<l.length;i++)e[g][l[i]]^=f;for(i=0;i<d.length;i++)e[g][d[i]]^=f}return U=r,Y=t,u.forEach((function(e){e(f,g,l,d)})),s("filtered"),M}function H(e){return C=e,P=!0,X((F=v.filterExact(_,e))(A))}function Q(e){return C=e,P=!0,X((F=v.filterRange(_,e))(A))}function Z(){return C=void 0,P=!1,X((F=v.filterAll)(A))}function ee(e){C=e,P=!0,q=e,F=v.filterAll,ne(e,!1);var n=F(A);return U=n[0],Y=n[1],M}function ne(n,r){var t,i,o,c=[],d=[],v=[],h=[],p=A.length;if(!a)for(t=0;t<p;++t)!(e[g][i=L[t]]&f)^!!(o=n(A[t],t))&&(o?c.push(i):d.push(i));if(a)for(t=0;t<p;++t)n(A[t],t)?(c.push(L[t]),v.push(t)):(d.push(L[t]),h.push(t));if(a){var m=[],y=[];for(t=0;t<c.length;t++)1===j[v[t]]&&(R[c[t]]++,j[v[t]]=0,1===R[c[t]]&&(e[g][c[t]]^=f,m.push(c[t])));for(t=0;t<d.length;t++)0===j[h[t]]&&(R[d[t]]--,j[h[t]]=1,0===R[d[t]]&&(e[g][d[t]]^=f,y.push(d[t])));if(c=m,d=y,r)for(t=0;t<T.length;t++)e[g][i=T[t]]&f&&(e[g][i]^=f,c.push(i));else for(t=0;t<T.length;t++)e[g][i=T[t]]&f||(e[g][i]^=f,d.push(i))}else{for(t=0;t<c.length;t++)e[g][c[t]]&f&&(e[g][c[t]]&=l);for(t=0;t<d.length;t++)e[g][d[t]]&f||(e[g][d[t]]|=f)}u.forEach((function(e){e(f,g,c,d)})),s("filtered")}function re(n){var i={top:function(e){var n=v(U(),0,c.length,e);return b.sort(n,0,n.length)},all:U,reduce:Y,reduceCount:D,reduceSum:function(e){return Y(E.reduceAdd(e),E.reduceSubtract(e),m)},order:W,orderNatural:function(){return W(h)},size:function(){return k},dispose:B,remove:B};$.push(i);var c,s,v,b,_,O,w,I,R=8,S=Re(R),k=0,j=p,z=p,q=!0,C=n===p;function P(i,o,f,v){a&&(I=f,f=A.length-i.length,v=i.length);var h,m,y,b,x,L,E=c,P=a?[]:we(k,S),K=_,N=O,$=w,U=k,Y=0,D=0;for(q&&(K=$=p),q&&(N=$=p),c=new Array(k),k=0,s=a?U?s:[]:U>1?d.arrayLengthen(s,t):we(t,S),U&&(y=(m=E[0]).key);D<v&&!((b=n(i[D]))>=b);)++D;for(;D<v;){for(m&&y<=b?(x=m,L=y,P[Y]=k,(m=E[++Y])&&(y=m.key)):(x={key:b,value:$()},L=b),c[k]=x;b<=L&&(h=o[D]+(a?I:f),a?s[h]?s[h].push(k):s[h]=[k]:s[h]=k,x.value=K(x.value,r[h],!0),e.zeroExcept(h,g,l)||(x.value=N(x.value,r[h],!1)),!(++D>=v));)b=n(i[D]);B()}for(;Y<U;)c[P[Y]=k]=E[Y++],B();if(a)for(var W=0;W<t;W++)s[W]||(s[W]=[]);if(k>Y)if(a)for(Y=0;Y<I;++Y)for(W=0;W<s[Y].length;W++)s[Y][W]=P[s[Y][W]];else for(Y=0;Y<f;++Y)s[Y]=P[s[Y]];function B(){a?k++:++k===S&&(P=d.arrayWiden(P,R<<=1),s=d.arrayWiden(s,R),S=Re(R))}h=u.indexOf(j),k>1||a?(j=M,z=V):(!k&&C&&(k=1,c=[{key:null,value:$()}]),1===k?(j=T,z=F):(j=p,z=p),s=null),u[h]=j}function K(e){if(k>1||a){var n,r,i,o=k,f=c,l=we(o,o);if(a){for(n=0,i=0;n<t;++n)if(e[n]!==Le){for(s[i]=s[n],r=0;r<s[i].length;r++)l[s[i][r]]=1;++i}}else for(n=0,i=0;n<t;++n)e[n]!==Le&&(l[s[i]=s[n]]=1,++i);for(c=[],k=0,n=0;n<o;++n)l[n]&&(l[n]=k++,c.push(f[n]));if(k>1||a)if(a)for(n=0;n<i;++n)for(r=0;r<s[n].length;++r)s[n][r]=l[s[n][r]];else for(n=0;n<i;++n)s[n]=l[s[n]];else s=null;u[u.indexOf(j)]=k>1||a?(z=V,j=M):1===k?(z=F,j=T):z=j=p}else if(1===k){if(C)return;for(var d=0;d<t;++d)if(e[d]!==Le)return;c=[],k=0,u[u.indexOf(j)]=j=z=p}}function M(n,t,u,i,o){var d,v,h,p,m;if(!(n===f&&t===g||q))if(a){for(d=0,p=u.length;d<p;++d)if(e.zeroExcept(h=u[d],g,l))for(v=0;v<s[h].length;v++)(m=c[s[h][v]]).value=_(m.value,r[h],!1,v);for(d=0,p=i.length;d<p;++d)if(e.onlyExcept(h=i[d],g,l,t,n))for(v=0;v<s[h].length;v++)(m=c[s[h][v]]).value=O(m.value,r[h],o,v)}else{for(d=0,p=u.length;d<p;++d)e.zeroExcept(h=u[d],g,l)&&((m=c[s[h]]).value=_(m.value,r[h],!1));for(d=0,p=i.length;d<p;++d)e.onlyExcept(h=i[d],g,l,t,n)&&((m=c[s[h]]).value=O(m.value,r[h],o))}}function T(n,t,u,i,o){if(!(n===f&&t===g||q)){var a,s,d,v=c[0];for(a=0,d=u.length;a<d;++a)e.zeroExcept(s=u[a],g,l)&&(v.value=_(v.value,r[s],!1));for(a=0,d=i.length;a<d;++a)e.onlyExcept(s=i[a],g,l,t,n)&&(v.value=O(v.value,r[s],o))}}function V(){var n,u,i;for(n=0;n<k;++n)c[n].value=w();if(a){for(n=0;n<t;++n)for(u=0;u<s[n].length;u++)(i=c[s[n][u]]).value=_(i.value,r[n],!0,u);for(n=0;n<t;++n)if(!e.zeroExcept(n,g,l))for(u=0;u<s[n].length;u++)(i=c[s[n][u]]).value=O(i.value,r[n],!1,u)}else{for(n=0;n<t;++n)(i=c[s[n]]).value=_(i.value,r[n],!0);for(n=0;n<t;++n)e.zeroExcept(n,g,l)||((i=c[s[n]]).value=O(i.value,r[n],!1))}}function F(){var n,u=c[0];for(u.value=w(),n=0;n<t;++n)u.value=_(u.value,r[n],!0);for(n=0;n<t;++n)e.zeroExcept(n,g,l)||(u.value=O(u.value,r[n],!1))}function U(){return q&&(z(),q=!1),c}function Y(e,n,r){return _=e,O=n,w=r,q=!0,i}function D(){return Y(E.reduceIncrement,E.reduceDecrement,m)}function W(e){function n(n){return e(n.value)}return v=x.by(n),b=y.by(n),i}function B(){var e=u.indexOf(j);return e>=0&&u.splice(e,1),(e=N.indexOf(P))>=0&&N.splice(e,1),(e=o.indexOf(K))>=0&&o.splice(e,1),(e=$.indexOf(i))>=0&&$.splice(e,1),i}return arguments.length<1&&(n=h),u.push(j),N.push(P),o.push(K),P(A,L,0,t),D().orderNatural()}function te(){$.forEach((function(e){e.dispose()}));var n=i.indexOf(B);return n>=0&&i.splice(n,1),(n=i.indexOf(G))>=0&&i.splice(n,1),(n=o.indexOf(J))>=0&&o.splice(n,1),e.masks[g]&=l,Z()}return g=W.offset,f=W.one,l=~f,b=g<<7|Math.log(f)/Math.log(2),B(r,0,t),G(r,0,t),M},groupAll:function(){var n,o,a,c,f={reduce:v,reduceCount:h,reduceSum:function(e){return v(E.reduceAdd(e),E.reduceSubtract(e),m)},value:function(){s&&(function(){var u;for(n=c(),u=0;u<t;++u)n=o(n,r[u],!0),e.zero(u)||(n=a(n,r[u],!1))}(),s=!1);return n},dispose:p,remove:p},s=!0;function l(u,i){var c;if(!s)for(c=i;c<t;++c)n=o(n,r[c],!0),e.zero(c)||(n=a(n,r[c],!1))}function d(t,u,i,c,f){var l,d,v;if(!s){for(l=0,v=i.length;l<v;++l)e.zero(d=i[l])&&(n=o(n,r[d],f));for(l=0,v=c.length;l<v;++l)e.only(d=c[l],u,t)&&(n=a(n,r[d],f))}}function v(e,n,r){return o=e,a=n,c=r,s=!0,f}function h(){return v(E.reduceIncrement,E.reduceDecrement,m)}function p(){var e=u.indexOf(d);return e>=0&&u.splice(e,1),(e=i.indexOf(l))>=0&&i.splice(e,1),f}return(u.push(d),i.push(l),l(r,0),h())},size:function(){return t},all:function(){return r},allFiltered:function(n){var u=[],i=0,o=f(n||[]);for(i=0;i<t;i++)e.zeroExceptMask(i,o)&&u.push(r[i]);return u},onChange:function(e){if("function"!=typeof e)return void console.warn("onChange callback parameter must be a function!");return a.push(e),function(){a.splice(a.indexOf(e),1)}},isElementFiltered:function(n,r){var t=f(r||[]);return e.zeroExceptMask(n,t)}},r=[],t=0,u=[],i=[],o=[],a=[];function c(u){var o=t,a=u.length;return a&&(r=r.concat(u),e.lengthen(t+=a),i.forEach((function(e){e(u,o,a)})),s("dataAdded")),n}function f(n){var r,t,u,i,o=Array(e.subarrays);for(r=0;r<e.subarrays;r++)o[r]=-1;for(t=0,u=n.length;t<u;t++)o[(i=n[t].id())>>7]&=~(1<<(63&i));return o}function s(e){for(var n=0;n<a.length;n++)a[n](e)}return e=new d.bitarray(0),arguments.length?c(arguments[0]):n}function we(e,n){return(n<257?d.array8:n<65537?d.array16:d.array32)(e)}function Ie(e){for(var n=we(e,e),r=-1;++r<e;)n[r]=r;return n}function Re(e){return 8===e?256:16===e?65536:4294967296}Oe.heap=y,Oe.heapselect=x,Oe.bisect=_,Oe.insertionsort=O,Oe.permute=w,Oe.quicksort=S,Oe.version="1.4.7";var Se={add:function(e,n,r){var t,u;return function(i,o,a){return n&&n(i,o,a),t=r(i).bisect(r(i).values,e(o),0,r(i).values.length),(u=r(i).values[t])&&u[0]===e(o)?u[1]++:r(i).values.splice(t,0,[e(o),1]),i}},remove:function(e,n,r){var t;return function(u,i,o){return n&&n(u,i,o),t=r(u).bisect(r(u).values,e(i),0,r(u).values.length),r(u).values[t][1]--,u}},initial:function(e,n){return function(r){return r=e(r),n(r).values=[],n(r).bisect=Oe.bisect.by((function(e){return e[0]})).left,r}}},Ee={add:function(e,n,r){var t,u=Oe.bisect.by((function(e){return e})).left;return function(i,o,a){return n&&n(i,o,a),t=u(r(i).valueList,e(o),0,r(i).valueList.length),r(i).valueList.splice(t,0,e(o)),i}},remove:function(e,n,r){var t,u=Oe.bisect.by((function(e){return e})).left;return function(i,o,a){return n&&n(i,o,a),t=u(r(i).valueList,e(o),0,r(i).valueList.length),r(i).valueList.splice(t,1),i}},initial:function(e,n){return function(r){return r=e(r),n(r).valueList=[],r}}},ke={add:function(e,n,r){var t,u;return function(i,o,a){return n&&n(i,o,a),t=r(i).bisect(r(i).values,e(o),0,r(i).values.length),(u=r(i).values[t])&&u[0]===e(o)&&0!==u[1]||r(i).exceptionCount++,i}},remove:function(e,n,r){var t,u;return function(i,o,a){return n&&n(i,o,a),t=r(i).bisect(r(i).values,e(o),0,r(i).values.length),(u=r(i).values[t])&&u[0]===e(o)&&1===u[1]&&r(i).exceptionCount--,i}},initial:function(e,n){return function(r){return r=e(r),n(r).exceptionCount=0,r}}},je={add:function(e,n,r,t){var u,i;return function(o,a,c){return r&&r(o,a,c),u=t(o).bisect(t(o).values,e(a),0,t(o).values.length),(i=t(o).values[u])&&i[0]===e(a)&&0!==i[1]||(t(o).exceptionSum=t(o).exceptionSum+n(a)),o}},remove:function(e,n,r,t){var u,i;return function(o,a,c){return r&&r(o,a,c),u=t(o).bisect(t(o).values,e(a),0,t(o).values.length),(i=t(o).values[u])&&i[0]===e(a)&&1===i[1]&&(t(o).exceptionSum=t(o).exceptionSum-n(a)),o}},initial:function(e,n){return function(r){return r=e(r),n(r).exceptionSum=0,r}}},ze={add:function(e,n,r){var t,u=Oe.bisect.by((function(e){return e})).left,i=Oe.bisect.by((function(e){return e.x})).right;return function(o,a,c){return n&&n(o,a,c),(t=r(o).histogram[i(r(o).histogram,e(a),0,r(o).histogram.length)-1]).y++,t.splice(u(t,e(a),0,t.length),0,e(a)),o}},remove:function(e,n,r){var t,u=Oe.bisect.by((function(e){return e})).left,i=Oe.bisect.by((function(e){return e.x})).right;return function(o,a,c){return n&&n(o,a,c),(t=r(o).histogram[i(r(o).histogram,e(a),0,r(o).histogram.length)-1]).y--,t.splice(u(t,e(a),0,t.length),1),o}},initial:function(e,n,r){return function(t){t=n(t),r(t).histogram=[];for(var u=[],i=1;i<e.length;i++)(u=[]).x=e[i-1],u.dx=e[i]-e[i-1],u.y=0,r(t).histogram.push(u);return t}}},qe={add:function(e,n,r){return function(t,u,i){return n&&n(t,u,i),r(t).sumOfSq=r(t).sumOfSq+e(u)*e(u),t}},remove:function(e,n,r){return function(t,u,i){return n&&n(t,u,i),r(t).sumOfSq=r(t).sumOfSq-e(u)*e(u),t}},initial:function(e,n){return function(r){return r=e(r),n(r).sumOfSq=0,r}}},Ce={add:function(e,n){return function(r,t,u){if(e&&e(r,t,u),n(r).count>0){n(r).std=0;var i=n(r).sumOfSq-n(r).sum*n(r).sum/n(r).count;i>0&&(n(r).std=Math.sqrt(i/(n(r).count-1)))}else n(r).std=0;return r}},remove:function(e,n){return function(r,t,u){if(e&&e(r,t,u),n(r).count>0){n(r).std=0;var i=n(r).sumOfSq-n(r).sum*n(r).sum/n(r).count;i>0&&(n(r).std=Math.sqrt(i/(n(r).count-1)))}else n(r).std=0;return r}},initial:function(e,n){return function(r){return r=e(r),n(r).std=0,r}}},Pe={add:function(e,n,r){var t,u;return function(i,o,a){return n&&n(i,o,a),t=r(i).nest,e.forEach((function(e){(u=t.filter((function(n){return n.key===e(o)}))[0])?t=u.values:(u=[],t.push({key:e(o),values:u}),t=u)})),t.push(o),i}},remove:function(e,n,r){var t;return function(u,i,o){return n&&n(u,i,o),t=r(u).nest,e.forEach((function(e){t=t.filter((function(n){return n.key===e(i)}))[0].values})),t.splice(t.indexOf(i),1),u}},initial:function(e,n){return function(r){return r=e(r),n(r).nest=[],r}}},Ke={initial:function(e,n,r){return function(t){function u(e){return function(){return r[e](n(t))}}for(var i in e&&(t=e(t)),r)n(t)[i]=u(i);return t}}},Me={add:function(e,n,r){return function(t,u,i){for(var o in n&&n(t,u,i),e)r(t)[o]=e[o](r(t),u);return t}}},Te={add:function(e,n,r){return function(e,t,u){return n&&n(e,t,u),r(e).dataList.push(t),e}},remove:function(e,n,r){return function(e,t,u){return n&&n(e,t,u),r(e).dataList.splice(r(e).dataList.indexOf(t),1),e}},initial:function(e,n){return function(r){return e&&(r=e(r)),n(r).dataList=[],r}}},Ve={add:function(e,n,r){return function(n,t,u){return e&&e(n,t,u),r(n,t)}},remove:function(e,n,r){return function(n,t,u){return e&&e(n,t,u),r(n,t)}},initial:function(e,n,r){return function(n){return e&&(n=e(n)),r(n)}}};var Fe={build:function a(c,f,s){s||(s=function(e){return e});var l={reduceAdd:f.reduceAdd,reduceRemove:f.reduceRemove,reduceInitial:f.reduceInitial};(c.count||c.std)&&(f.reduceAdd=n.add(f.reduceAdd,s,c.count),f.reduceRemove=n.remove(f.reduceRemove,s,c.count),f.reduceInitial=n.initial(f.reduceInitial,s,c.count)),c.sum&&(f.reduceAdd=r.add(c.sum,f.reduceAdd,s),f.reduceRemove=r.remove(c.sum,f.reduceRemove,s),f.reduceInitial=r.initial(f.reduceInitial,s)),c.avg&&(c.count&&c.sum?(f.reduceAdd=t.add(c.sum,f.reduceAdd,s),f.reduceRemove=t.remove(c.sum,f.reduceRemove,s),f.reduceInitial=t.initial(f.reduceInitial,s)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),c.exceptionCount&&(c.exceptionAccessor?(f.reduceAdd=ke.add(c.exceptionAccessor,f.reduceAdd,s),f.reduceRemove=ke.remove(c.exceptionAccessor,f.reduceRemove,s),f.reduceInitial=ke.initial(f.reduceInitial,s)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),c.exceptionSum&&(c.exceptionAccessor?(f.reduceAdd=je.add(c.exceptionAccessor,c.exceptionSum,f.reduceAdd,s),f.reduceRemove=je.remove(c.exceptionAccessor,c.exceptionSum,f.reduceRemove,s),f.reduceInitial=je.initial(f.reduceInitial,s)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(c.valueList||c.median||c.min||c.max)&&(f.reduceAdd=Ee.add(c.valueList,f.reduceAdd,s),f.reduceRemove=Ee.remove(c.valueList,f.reduceRemove,s),f.reduceInitial=Ee.initial(f.reduceInitial,s)),c.dataList&&(f.reduceAdd=Te.add(c.dataList,f.reduceAdd,s),f.reduceRemove=Te.remove(c.dataList,f.reduceRemove,s),f.reduceInitial=Te.initial(f.reduceInitial,s)),c.median&&(f.reduceAdd=u.add(f.reduceAdd,s),f.reduceRemove=u.remove(f.reduceRemove,s),f.reduceInitial=u.initial(f.reduceInitial,s)),c.min&&(f.reduceAdd=i.add(f.reduceAdd,s),f.reduceRemove=i.remove(f.reduceRemove,s),f.reduceInitial=i.initial(f.reduceInitial,s)),c.max&&(f.reduceAdd=o.add(f.reduceAdd,s),f.reduceRemove=o.remove(f.reduceRemove,s),f.reduceInitial=o.initial(f.reduceInitial,s)),c.exceptionAccessor&&(f.reduceAdd=Se.add(c.exceptionAccessor,f.reduceAdd,s),f.reduceRemove=Se.remove(c.exceptionAccessor,f.reduceRemove,s),f.reduceInitial=Se.initial(f.reduceInitial,s)),c.histogramValue&&c.histogramThresholds&&(f.reduceAdd=ze.add(c.histogramValue,f.reduceAdd,s),f.reduceRemove=ze.remove(c.histogramValue,f.reduceRemove,s),f.reduceInitial=ze.initial(c.histogramThresholds,f.reduceInitial,s)),c.sumOfSquares&&(f.reduceAdd=qe.add(c.sumOfSquares,f.reduceAdd,s),f.reduceRemove=qe.remove(c.sumOfSquares,f.reduceRemove,s),f.reduceInitial=qe.initial(f.reduceInitial,s)),c.std&&(c.sumOfSquares&&c.sum?(f.reduceAdd=Ce.add(f.reduceAdd,s),f.reduceRemove=Ce.remove(f.reduceRemove,s),f.reduceInitial=Ce.initial(f.reduceInitial,s)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),c.custom&&(f.reduceAdd=Ve.add(f.reduceAdd,s,c.custom.add),f.reduceRemove=Ve.remove(f.reduceRemove,s,c.custom.remove),f.reduceInitial=Ve.initial(f.reduceInitial,s,c.custom.initial)),c.nestKeys&&(f.reduceAdd=Pe.add(c.nestKeys,f.reduceAdd,s),f.reduceRemove=Pe.remove(c.nestKeys,f.reduceRemove,s),f.reduceInitial=Pe.initial(f.reduceInitial,s)),c.aliasKeys&&(f.reduceInitial=Ke.initial(f.reduceInitial,s,c.aliasKeys)),c.aliasPropKeys&&(f.reduceAdd=Me.add(c.aliasPropKeys,f.reduceAdd,s),f.reduceRemove=Me.add(c.aliasPropKeys,f.reduceRemove,s)),c.filter&&(f.reduceAdd=e.add(c.filter,f.reduceAdd,l.reduceAdd,s),f.reduceRemove=e.remove(c.filter,f.reduceRemove,l.reduceRemove,s)),c.values&&Object.getOwnPropertyNames(c.values).forEach((function(e){var n;f.reduceInitial=(n=f.reduceInitial,function(r){return r=n(r),s(r)[e]={},r}),a(c.values[e].parameters,f,(function(n){return n[e]}))}))}},Ne=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1,custom:!1}};function $e(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;++r){var t=arguments[r];if(null!=t)for(var u in t)t.hasOwnProperty(u)&&(n[u]=t[u])}return n}var Ue={build:function e(n,r){function t(e){if("string"==typeof e){var n=e;return function(e){return e[n]}}return e}function u(e){if("string"==typeof e){var n=e;return function(e){return+e[n]}}return e}n.fromObject=function(e){return arguments.length?($e(r,e),n):r},n.toObject=function(){return r},n.count=function(e,t){return arguments.length?(t||(t="count"),r.count=t,n):r.count},n.sum=function(e){return arguments.length?(e=u(e),r.sum=e,n):r.sum},n.avg=function(e){return arguments.length?("function"==typeof(e=u(e))?(r.sum&&r.sum!==e&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),r.sum=e,r.avg=!0,r.count="count"):r.avg=e,n):r.avg},n.exception=function(e){return arguments.length?(e=t(e),r.exceptionAccessor=e,n):r.exceptionAccessor},n.filter=function(e){return arguments.length?(r.filter=e,n):r.filter},n.valueList=function(e){return arguments.length?(e=t(e),r.valueList=e,n):r.valueList},n.median=function(e){return arguments.length?("function"==typeof(e=u(e))&&(r.valueList&&r.valueList!==e&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),r.valueList=e),r.median=e,n):r.median},n.min=function(e){return arguments.length?("function"==typeof(e=u(e))&&(r.valueList&&r.valueList!==e&&console.warn("VALUELIST accessor is being overwritten by min aggregation"),r.valueList=e),r.min=e,n):r.min},n.max=function(e){return arguments.length?("function"==typeof(e=u(e))&&(r.valueList&&r.valueList!==e&&console.warn("VALUELIST accessor is being overwritten by max aggregation"),r.valueList=e),r.max=e,n):r.max},n.exceptionCount=function(e){return arguments.length?("function"==typeof(e=t(e))?(r.exceptionAccessor&&r.exceptionAccessor!==e&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),r.exceptionAccessor=e,r.exceptionCount=!0):r.exceptionCount=e,n):r.exceptionCount},n.exceptionSum=function(e){return arguments.length?(e=u(e),r.exceptionSum=e,n):r.exceptionSum},n.histogramValue=function(e){return arguments.length?(e=u(e),r.histogramValue=e,n):r.histogramValue},n.histogramBins=function(e){return arguments.length?(r.histogramThresholds=e,n):r.histogramThresholds},n.std=function(e){return arguments.length?("function"==typeof(e=u(e))?(r.sumOfSquares=e,r.sum=e,r.count="count",r.std=!0):r.std=e,n):r.std},n.sumOfSq=function(e){return arguments.length?(e=u(e),r.sumOfSquares=e,n):r.sumOfSquares},n.value=function(n,t){if(arguments.length&&"string"==typeof n)return r.values||(r.values={}),r.values[n]={},r.values[n].parameters=Ne(),e(r.values[n],r.values[n].parameters),t&&(r.values[n].accessor=t),r.values[n];console.error("'value' requires a string argument.")},n.nest=function(e){return arguments.length?(e.map(t),r.nestKeys=e,n):r.nestKeys},n.alias=function(e){return arguments.length?(r.aliasKeys=e,n):r.aliasKeys},n.aliasProp=function(e){return arguments.length?(r.aliasPropKeys=e,n):r.aliasPropKeys},n.groupAll=function(e){return arguments.length?(r.groupAll=e,n):r.groupAll},n.dataList=function(e){return arguments.length?(r.dataList=e,n):r.dataList},n.custom=function(e){return arguments.length?(r.custom=e,n):r.custom}}};var Ye=function(e){return function(n){return n[e]}};const De=function(e,n){return e||(e=function(e){return e}),function(r,t){n&&n(r,t);var u=e(r),i=e(t);return void 0!==i.count&&(u.count+=i.count),void 0!==i.sum&&(u.sum+=i.sum),void 0!==i.avg&&(u.avg=u.sum/u.count),r}},We=function(e,n,r){n.reduceInitial();var t=r.values?Object.keys(r.values):[],u=De();if(t.length)for(var i=0;i<t.length;++i)u=De(Ye(t[i]),u);return function(r,t){if(!arguments.length)return e();if(r===1/0||!r)return e();var i=e(),o=r-1;if(i.length<=r)return i;var a=i.slice(0,o),c={key:t||"Others"};c.value=n.reduceInitial();for(var f=o;f<i.length;++f)u(c.value,i[f].value);return a.push(c),a}};var Be=function(e){if("function"==typeof e)return e;if(~e.indexOf(".")){var n=e.split(".");return function(e){return n.reduce((function(e,n){return e[n]}),e)}}return function(n){return n[e]}};function Ge(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}var Je=function(e,n){return function(r,t){return n(e(r),e(t))}};function Xe(e){return function(n,r){return 1===arguments.length&&(r=Ge),e().sort(Je(Be(n),r))}}function He(){var e=Ne(),n={};function r(r){if(n={reduceAdd:function(e){return e},reduceRemove:function(e){return e},reduceInitial:function(){return{}}},Fe.build(e,n),e.groupAll)if(r.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var t,u,i,o,a,c=Oe.bisect.by((function(e){return e.key})).left;r.reduce((function(r,f,s){for(i=e.groupAll(f),o=i.length,u=0;u<o;u++)a=i[u],r[t=c(r,a,0,r.length)]&&r[t].key===a||r.splice(t,0,{key:a,value:n.reduceInitial()}),n.reduceAdd(r[t].value,f,s);return r}),(function(r,a,f){for(i=e.groupAll(a),o=i.length,u=0;u<o;u++)t=c(r,i[u],0,r.length),n.reduceRemove(r[t].value,a,f);return r}),(function(){return[]})),r.all||(r.all=function(){return this.value()})}else r.reduce(n.reduceAdd,n.reduceRemove,n.reduceInitial);return Qe(r,e,n),r}return Ue.build(r,e),r}!function(e){e.postprocessors={},e.registerPostProcessor=function(n,r){e.postprocessors[n]=r},e.registerPostProcessor("cap",We),e.registerPostProcessor("sortBy",Xe)}(He);const Qe=function(e){return function(n,r,t){n.post=function(){var u=function(){return u.all()};u.all=function(){return n.all()};var i=e.postprocessors;return Object.keys(i).forEach((function(e){u[e]=function(){var n=u.all,o=[].slice.call(arguments);return u.all=function(){return i[e](n,t,r).apply(null,o)},u}})),u}}}(He);return He}));
